<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="clientes">
    

    <select id="obtenerLista" resultType="pojo.Cliente">
        SELECT idCliente, nombre, apellidoPaterno, apellidoMaterno,
        correo, telefono, idDireccion
        FROM cliente
    </select>
    
    <select id="obtenerDatosCliente" resultType="pojo.DatosRegistroCliente" parameterType="int">
<<<<<<< HEAD
    SELECT 
=======
        SELECT 
>>>>>>> bec9bc0b662bc7a1f8fbc70a4c233450dc928e1b
    c.idCliente AS 'cliente.idCliente',
    c.nombre AS 'cliente.nombre',
    c.apellidoPaterno AS 'cliente.apellidoPaterno',
    c.apellidoMaterno AS 'cliente.apellidoMaterno',
    c.telefono AS 'cliente.telefono',
    c.correo AS 'cliente.correo',

    d.idDireccion AS 'direccion.idDireccion',
    d.calle AS 'direccion.calle',
    d.numero AS 'direccion.numero',
    d.colonia AS 'direccion.colonia',
    d.codigoPostal AS 'direccion.codigoPostal',
<<<<<<< HEAD
    d.idMunicipio AS 'direccion.idMunicipio'
=======
    d.ciudad AS 'direccion.ciudad',
    d.estado AS 'direccion.estado'
>>>>>>> bec9bc0b662bc7a1f8fbc70a4c233450dc928e1b
FROM 
    cliente c
INNER JOIN 
    direccion d ON c.idDireccion = d.idDireccion
WHERE 
    c.idCliente = #{idCliente}

    </select>
    
    <insert id="registrar" parameterType="pojo.DatosRegistroCliente" statementType="CALLABLE">
        {CALL registrarCliente(
        #{cliente.nombre, mode=IN, jdbcType=VARCHAR},
        #{cliente.apellidoPaterno, mode=IN, jdbcType=VARCHAR},
        #{cliente.apellidoMaterno, mode=IN, jdbcType=VARCHAR},
        #{cliente.telefono, mode=IN, jdbcType=VARCHAR},
        #{cliente.correo, mode=IN, jdbcType=VARCHAR},
        

        #{direccion.calle, mode=IN, jdbcType=VARCHAR},
        #{direccion.numero, mode=IN, jdbcType=INTEGER},
        #{direccion.colonia, mode=IN, jdbcType=VARCHAR},
        #{direccion.codigoPostal, mode=IN, jdbcType=VARCHAR},
<<<<<<< HEAD
        #{direccion.idMunicipio, mode=IN, jdbcType=INTEGER},
=======
        #{direccion.ciudad, mode=IN, jdbcType=VARCHAR},
        #{direccion.estado, mode=IN, jdbcType=VARCHAR},
>>>>>>> bec9bc0b662bc7a1f8fbc70a4c233450dc928e1b

        #{filasAfectadas, mode=INOUT, jdbcType=INTEGER},
        #{error, mode=INOUT, jdbcType=VARCHAR}
    )}
    </insert>
    
  <update id="editar" parameterType="pojo.DatosRegistroCliente" statementType="CALLABLE">
    {CALL editarCliente(
        #{cliente.idCliente, mode=IN, jdbcType=INTEGER},
        #{cliente.nombre, mode=IN, jdbcType=VARCHAR},
        #{cliente.apellidoPaterno, mode=IN, jdbcType=VARCHAR},
        #{cliente.apellidoMaterno, mode=IN, jdbcType=VARCHAR},
        #{cliente.telefono, mode=IN, jdbcType=VARCHAR},
        #{direccion.calle, mode=IN, jdbcType=VARCHAR},
        #{direccion.numero, mode=IN, jdbcType=VARCHAR},
        #{direccion.colonia, mode=IN, jdbcType=VARCHAR},
        #{direccion.codigoPostal, mode=IN, jdbcType=VARCHAR},
<<<<<<< HEAD
        #{direccion.idMunicipio, mode=IN, jdbcType=INTEGER},
=======
        #{direccion.ciudad, mode=IN, jdbcType=VARCHAR},
        #{direccion.estado, mode=IN, jdbcType=VARCHAR},
>>>>>>> bec9bc0b662bc7a1f8fbc70a4c233450dc928e1b
        #{filasAfectadas, mode=INOUT, jdbcType=INTEGER},
        #{error, mode=INOUT, jdbcType=VARCHAR}
    )}
    </update>

    
<<<<<<< HEAD
   <delete id="eliminar" parameterType="int">
    DELETE FROM cliente
    WHERE idCliente = #{idCliente}
    AND NOT EXISTS (
        SELECT 1
        FROM envio
        WHERE idCliente = #{idCliente}
    )
</delete>

=======
    <delete id="eliminar" parameterType="int" >
        DELETE FROM cliente 
        WHERE idCliente = #{idCliente}
    </delete>
>>>>>>> bec9bc0b662bc7a1f8fbc70a4c233450dc928e1b
    


</mapper>
